<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task 2</title>
</head>
<body>
  <h1>Задача 2</h1>
  <p> Дано масив 30 випадкових цілих чисел. Підрахувати скільки було обмінів під час сортування змішуванням.</p>
  <script>
    // 1. Functions of generating random numbers and random array
    function getRandomNumber(min=1, max=100) {
      return min + Math.floor(Math.random() * (max - min + min))
    }

    function getArray(arrayLength=30, min=1, max=100) {
        const arr = []
        for (let i = 0; i < arrayLength; i++) {
          const element = arr[i];
          const randNum = getRandomNumber(min, max)
          arr.push(randNum)
        }
        return arr
    }

    let generatedArray = getArray()
      
    // Cocktail Sort //  

    function getNumberChanges(arr) {
      let leftIndex = 0;
      let rigthIndex = arr.length - 1; 
      let counter = 0;
      let changed;  
  
      while (leftIndex < rigthIndex) {
        changed = false;  
        for (let index = leftIndex; index < rigthIndex; index++) {
          if (arr[index] > arr[index + 1]) {
            swap(arr, index, index + 1);
            counter++;
            changed = true;
          }
        }  
        if (changed === false) break; // If no swaps occurred, the array is already sorted
        changed = false;
        rigthIndex--;  
        for (let index = rigthIndex; index > leftIndex; index--) {
          if (arr[index] < arr[index - 1]) {
            swap(arr, index, index - 1);
            counter++;
            changed = true;
          }
        }  
        if (changed === false) break; 
        changed = false;
        leftIndex++;
      }  
  
      return counter;
    }
  
    // Function swap
    function swap(arr, i, j) {
      const temporary = arr[i];
      arr[i] = arr[j];
      arr[j] = temporary;
    }
  
    // Show the result
    document.write(`Array: ${generatedArray}.<br>`)
    document.write(`The number of changes: ${getNumberChanges(generatedArray)}`)
  </script>
</body>
</html>